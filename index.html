<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mortgage Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for better aesthetics */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Basic styling for focus states */
        input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.5); /* Blue focus ring */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-md border border-gray-200">
        <h1 class="text-3xl font-extrabold text-gray-800 mb-6 text-center">Mortgage Calculator</h1>

        <div class="space-y-4">
            <div>
                <label for="principal" class="block text-sm font-medium text-gray-700 mb-1">Principal Loan Amount ($)</label>
                <input type="number" id="principal" value="300000" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="interestRate" class="block text-sm font-medium text-gray-700 mb-1">Annual Interest Rate (%)</label>
                <input type="number" id="interestRate" value="3.5" step="0.01" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="loanTerm" class="block text-sm font-medium text-gray-700 mb-1">Loan Term (Years)</label>
                <input type="number" id="loanTerm" value="30" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="downPayment" class="block text-sm font-medium text-gray-700 mb-1">Down Payment (%)</label>
                <input type="number" id="downPayment" value="20" min="0" max="100" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="homeInsurance" class="block text-sm font-medium text-gray-700 mb-1">Home Insurance (Monthly $)</label>
                <input type="number" id="homeInsurance" value="100" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="hoa" class="block text-sm font-medium text-gray-700 mb-1">HOA (Monthly $)</label>
                <input type="number" id="hoa" value="50" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <div>
                <label for="propertyTax" class="block text-sm font-medium text-gray-700 mb-1">Property Tax (Half-Yearly $)</label>
                <input type="number" id="propertyTax" value="2400" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <button id="calculateBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
                Calculate Mortgage
            </button>
        </div>

        <div id="results" class="mt-8 p-6 bg-blue-50 rounded-xl border border-blue-200 hidden">
            <h2 class="text-xl font-semibold text-gray-800 mb-4 text-center">Your Estimated Monthly Payment:</h2>
            <p class="text-4xl font-extrabold text-blue-700 text-center mb-4" id="monthlyPaymentResult">$0.00</p>
            <div class="text-sm text-gray-600 space-y-2">
                <p><span class="font-medium">Principal & Interest:</span> <span id="pAndIResult"></span></p>
                <p><span class="font-medium">Home Insurance:</span> <span id="insuranceResult"></span></p>
                <p><span class="font-medium">HOA:</span> <span id="hoaResult"></span></p>
                <p><span class="font-medium">Property Tax (Monthly):</span> <span id="taxResult"></span></p>
            </div>
        </div>

        <div id="errorMessage" class="mt-4 p-4 bg-red-100 text-red-700 rounded-lg hidden">
            Please fill in all fields with valid positive numbers.
        </div>
    </div>

    <script>
        // Get references to all input elements and result display elements
        const principalInput = document.getElementById('principal');
        const interestRateInput = document.getElementById('interestRate');
        const loanTermInput = document.getElementById('loanTerm');
        const downPaymentInput = document.getElementById('downPayment');
        const homeInsuranceInput = document.getElementById('homeInsurance');
        const hoaInput = document.getElementById('hoa');
        const propertyTaxInput = document.getElementById('propertyTax');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultsDiv = document.getElementById('results');
        const monthlyPaymentResult = document.getElementById('monthlyPaymentResult');
        const pAndIResult = document.getElementById('pAndIResult');
        const insuranceResult = document.getElementById('insuranceResult');
        const hoaResult = document.getElementById('hoaResult');
        const taxResult = document.getElementById('taxResult');
        const errorMessageDiv = document.getElementById('errorMessage');

        /**
         * Formats a number as a currency string.
         * @param {number} amount - The number to format.
         * @returns {string} The formatted currency string.
         */
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }

        /**
         * Calculates the monthly mortgage payment (Principal & Interest).
         * @param {number} loanAmount - The total loan amount after down payment.
         * @param {number} annualInterestRate - The annual interest rate (e.g., 3.5 for 3.5%).
         * @param {number} loanTermYears - The loan term in years.
         * @returns {number} The monthly principal and interest payment.
         */
        function calculateMortgagePAndI(loanAmount, annualInterestRate, loanTermYears) {
            // Convert annual interest rate to monthly decimal rate
            const monthlyInterestRate = (annualInterestRate / 100) / 12;
            // Convert loan term from years to months
            const numberOfPayments = loanTermYears * 12;

            // If monthly interest rate is 0, payment is simply loan amount divided by number of payments
            if (monthlyInterestRate === 0) {
                return loanAmount / numberOfPayments;
            }

            // Mortgage payment formula: M = P [ i(1 + i)^n ] / [ (1 + i)^n â€“ 1]
            // Where:
            // M = Monthly payment
            // P = Principal loan amount
            // i = Monthly interest rate
            // n = Total number of payments (loan term in months)
            const numerator = monthlyInterestRate * Math.pow((1 + monthlyInterestRate), numberOfPayments);
            const denominator = Math.pow((1 + monthlyInterestRate), numberOfPayments) - 1;
            return loanAmount * (numerator / denominator);
        }

        /**
         * Handles the calculation logic when the button is clicked.
         */
        calculateBtn.addEventListener('click', () => {
            // Hide previous results and error messages
            resultsDiv.classList.add('hidden');
            errorMessageDiv.classList.add('hidden');

            // Get values from inputs and convert to numbers
            const principal = parseFloat(principalInput.value);
            const interestRate = parseFloat(interestRateInput.value);
            const loanTerm = parseFloat(loanTermInput.value);
            const downPaymentPercent = parseFloat(downPaymentInput.value);
            const homeInsurance = parseFloat(homeInsuranceInput.value);
            const hoa = parseFloat(hoaInput.value);
            const propertyTaxHalfYearly = parseFloat(propertyTaxInput.value);

            // Input validation: Check if all inputs are valid numbers and non-negative
            if (isNaN(principal) || principal < 0 ||
                isNaN(interestRate) || interestRate < 0 ||
                isNaN(loanTerm) || loanTerm <= 0 ||
                isNaN(downPaymentPercent) || downPaymentPercent < 0 || downPaymentPercent > 100 ||
                isNaN(homeInsurance) || homeInsurance < 0 ||
                isNaN(hoa) || hoa < 0 ||
                isNaN(propertyTaxHalfYearly) || propertyTaxHalfYearly < 0)
            {
                errorMessageDiv.classList.remove('hidden'); // Show error message
                return; // Stop execution if validation fails
            }

            // Calculate the actual down payment amount
            const downPaymentAmount = principal * (downPaymentPercent / 100);
            // Calculate the loan amount after down payment
            const loanAmountAfterDownPayment = principal - downPaymentAmount;

            // Calculate monthly principal and interest payment
            const monthlyPAndI = calculateMortgagePAndI(loanAmountAfterDownPayment, interestRate, loanTerm);

            // Convert half-yearly property tax to monthly
            const monthlyPropertyTax = propertyTaxHalfYearly / 6;

            // Calculate total monthly payment
            const totalMonthlyPayment = monthlyPAndI + homeInsurance + hoa + monthlyPropertyTax;

            // Display the results, formatted as currency
            monthlyPaymentResult.textContent = formatCurrency(totalMonthlyPayment);
            pAndIResult.textContent = formatCurrency(monthlyPAndI);
            insuranceResult.textContent = formatCurrency(homeInsurance);
            hoaResult.textContent = formatCurrency(hoa);
            taxResult.textContent = formatCurrency(monthlyPropertyTax);

            // Show the results section
            resultsDiv.classList.remove('hidden');
        });
    </script>
</body>
</html>
